<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>GrapesJS Demo - Free Open Source Website Page Builder</title>
  <meta content="Best Free Open Source Responsive Websites Builder" name="description">
  <link rel="stylesheet" href="stylesheets/toastr.min.css">
  <link rel="stylesheet" href="stylesheets/grapes.min.css?v0.20.4">
  <link rel="stylesheet" href="stylesheets/grapesjs-preset-webpage.min.css">
  <link rel="stylesheet" href="stylesheets/tooltip.css">
  <link rel="stylesheet" href="stylesheets/demos.css?v3">
  <link rel="stylesheet" href="assets/css/editor.css">
  <link href="https://unpkg.com/grapick/dist/grapick.min.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/toastr.min.js"></script>
  <script src="js/grapes.min.js?v0.20.4"></script>
  <script src="https://unpkg.com/grapesjs-preset-webpage@1.0.2"></script>
  <script src="https://unpkg.com/grapesjs-blocks-basic@1.0.1"></script>
  <script src="https://unpkg.com/grapesjs-plugin-forms@2.0.5"></script>
  <script src="https://unpkg.com/grapesjs-component-countdown@1.0.1"></script>
  <script src="https://unpkg.com/grapesjs-plugin-export@1.0.11"></script>
  <script src="https://unpkg.com/grapesjs-tabs@1.0.6"></script>
  <script src="https://unpkg.com/grapesjs-custom-code@1.0.1"></script>
  <script src="https://unpkg.com/grapesjs-touch@0.1.1"></script>
  <script src="https://unpkg.com/grapesjs-parser-postcss@1.0.1"></script>
  <script src="https://unpkg.com/grapesjs-tooltip@0.1.7"></script>
  <script src="https://unpkg.com/grapesjs-tui-image-editor@0.1.3"></script>
  <script src="https://unpkg.com/grapesjs-typed@1.0.5"></script>
  <script src="https://unpkg.com/grapesjs-style-bg@2.0.1"></script>
  <script>
  function getCookie(name) {
    var match = document.cookie.match(RegExp('(?:^|;\\s*)' + name + '=([^;]*)')); 
    return match ? match[1] : null;}
    var match=getCookie("loggedIn")
    if (match===null){
      window.location = "pages-login.html"
    }

  </script>



</head>


<body>
  <div style="display: none">
    <div class="gjs-logo-cont">
      <a href="https://grapesjs.com"><img class="gjs-logo" src="img/grapesjs-logo-cl.png"></a>
      <div class="gjs-logo-version"></div>
    </div>
  </div>
  <div class="ad-cont">
    <!-- <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=grapesjscom" id="_carbonads_js"></script> -->
    <div id="native-carbon"></div>
    <script async type="text/javascript" src="./js/carbon-v2.js"></script>
  </div>


  <div id="gjs" style="height:0px; overflow:hidden">
    <header class="header-banner">
      <div class="container-width">
        <div class="logo-container">
          <div class="logo">GrapesJS</div>
        </div>
        <nav class="menu">
          <div class="menu-item">BUILDER</div>
          <div class="menu-item">TEMPLATE</div>
          <div class="menu-item">WEB</div>
        </nav>
        <div class="clearfix"></div>
        <div class="lead-title">Build your templates without coding</div>
        <div class="sub-lead-title">All text blocks could be edited easily with double clicking on it. You can
          create
          new text blocks with the command from the left panel</div>
        <div class="lead-btn">Hover me</div>
      </div>
    </header>

    <section class="flex-sect">
      <div class="container-width">
        <div class="flex-title">Flex is the new black</div>
        <div class="flex-desc">With flexbox system you're able to build complex layouts easily and with free
          responsivity</div>
        <div class="cards">
          <div class="card">
            <div class="card-header"></div>
            <div class="card-body">
              <div class="card-title">Title one</div>
              <div class="card-sub-title">Subtitle one</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
          <div class="card">
            <div class="card-header ch2"></div>
            <div class="card-body">
              <div class="card-title">Title two</div>
              <div class="card-sub-title">Subtitle two</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
          <div class="card">
            <div class="card-header ch3"></div>
            <div class="card-body">
              <div class="card-title">Title three</div>
              <div class="card-sub-title">Subtitle three</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
          <div class="card">
            <div class="card-header ch4"></div>
            <div class="card-body">
              <div class="card-title">Title four</div>
              <div class="card-sub-title">Subtitle four</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
          <div class="card">
            <div class="card-header ch5"></div>
            <div class="card-body">
              <div class="card-title">Title five</div>
              <div class="card-sub-title">Subtitle five</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
          <div class="card">
            <div class="card-header ch6"></div>
            <div class="card-body">
              <div class="card-title">Title six</div>
              <div class="card-sub-title">Subtitle six</div>
              <div class="card-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="am-sect">
      <div class="container-width">
        <div class="am-container">
          <img class="img-phone" onmousedown="return false" src="./img/phone-app.png" />
          <div class="am-content">
            <div class="am-pre">ASSET MANAGER</div>
            <div class="am-title">Manage your images with Asset Manager</div>
            <div class="am-desc">You can create image blocks with the command from the left panel and edit them with
              double click</div>
            <div class="am-post">Image uploading is not allowed in this demo</div>
          </div>
        </div>
      </div>
    </section>

    <section class="blk-sect">
      <div class="container-width">
        <div class="blk-title">Blocks</div>
        <div class="blk-desc">Each element in HTML page could be seen as a block. On the left panel you could find
          different kind of blocks that you can create, move and style</div>

        <div class="price-cards">
          <div class="price-card-cont">
            <div class="price-card">
              <div class="pc-title">Starter</div>
              <div class="pc-desc">Some random list</div>
              <div class="pc-feature odd-feat">+ Starter feature 1</div>
              <div class="pc-feature">+ Starter feature 2</div>
              <div class="pc-feature odd-feat">+ Starter feature 3</div>
              <div class="pc-feature">+ Starter feature 4</div>
              <div class="pc-amount odd-feat">$ 9,90/mo</div>
            </div>
          </div>
          <div class="price-card-cont">
            <div class="price-card pc-regular">
              <div class="pc-title">Regular</div>
              <div class="pc-desc">Some random list</div>
              <div class="pc-feature odd-feat">+ Regular feature 1</div>
              <div class="pc-feature">+ Regular feature 2</div>
              <div class="pc-feature odd-feat">+ Regular feature 3</div>
              <div class="pc-feature">+ Regular feature 4</div>
              <div class="pc-amount odd-feat">$ 19,90/mo</div>
            </div>
          </div>
          <div class="price-card-cont">
            <div class="price-card pc-enterprise">
              <div class="pc-title">Enterprise</div>
              <div class="pc-desc">Some random list</div>
              <div class="pc-feature odd-feat">+ Enterprise feature 1</div>
              <div class="pc-feature">+ Enterprise feature 2</div>
              <div class="pc-feature odd-feat">+ Enterprise feature 3</div>
              <div class="pc-feature">+ Enterprise feature 4</div>
              <div class="pc-amount odd-feat">$ 29,90/mo</div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section class="bdg-sect">
      <div class="container-width">
        <h1 class="bdg-title">The team</h1>
        <div class="badges">
          <div class="badge">
            <div class="badge-header"></div>
            <img class="badge-avatar" src="img/team1.jpg">
            <div class="badge-body">
              <div class="badge-name">Adam Smith</div>
              <div class="badge-role">CEO</div>
              <div class="badge-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore ipsum dolor sit</div>
            </div>
            <div class="badge-foot">
              <span class="badge-link">f</span>
              <span class="badge-link">t</span>
              <span class="badge-link">ln</span>
            </div>
          </div>
          <div class="badge">
            <div class="badge-header"></div>
            <img class="badge-avatar" src="img/team2.jpg">
            <div class="badge-body">
              <div class="badge-name">John Black</div>
              <div class="badge-role">Software Engineer</div>
              <div class="badge-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore ipsum dolor sit</div>
            </div>
            <div class="badge-foot">
              <span class="badge-link">f</span>
              <span class="badge-link">t</span>
              <span class="badge-link">ln</span>
            </div>
          </div>
          <div class="badge">
            <div class="badge-header"></div>
            <img class="badge-avatar" src="img/team3.jpg">
            <div class="badge-body">
              <div class="badge-name">Jessica White</div>
              <div class="badge-role">Web Designer</div>
              <div class="badge-desc">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                incididunt ut labore ipsum dolor sit</div>
            </div>
            <div class="badge-foot">
              <span class="badge-link">f</span>
              <span class="badge-link">t</span>
              <span class="badge-link">ln</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer-under">
      <div class="container-width">
        <div class="footer-container">
          <div class="foot-lists">
            <div class="foot-list">
              <div class="foot-list-title">About us</div>
              <div class="foot-list-item">Contact</div>
              <div class="foot-list-item">Events</div>
              <div class="foot-list-item">Company</div>
              <div class="foot-list-item">Jobs</div>
              <div class="foot-list-item">Blog</div>
            </div>
            <div class="foot-list">
              <div class="foot-list-title">Services</div>
              <div class="foot-list-item">Education</div>
              <div class="foot-list-item">Partner</div>
              <div class="foot-list-item">Community</div>
              <div class="foot-list-item">Forum</div>
              <div class="foot-list-item">Download</div>
              <div class="foot-list-item">Upgrade</div>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="form-sub">
            <div class="foot-form-cont">
              <div class="foot-form-title">Subscribe</div>
              <div class="foot-form-desc">Subscribe to our newsletter to receive exclusive offers and the latest
                news
              </div>
              <input name="name" class="sub-input" placeholder="Name" />
              <input name="email" class="sub-input" placeholder="Email" />
              <button class="sub-btn" type="button">Submit</button>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright">
        <div class="container-width">
          <div class="made-with">
            made with GrapesJS
          </div>
          <div class="foot-social-btns">facebook twitter linkedin mail</div>
          <div class="clearfix"></div>
        </div>
      </div>
    </footer>


  </div>

  <div id="info-panel" style="display:none">
    <br />
    <svg class="info-panel-logo" xmlns="https://www.w3.org/2000/svg" version="1">
      <g id="gjs-logo">
        <path
          d="M40 5l-12.9 7.4 -12.9 7.4c-1.4 0.8-2.7 2.3-3.7 3.9 -0.9 1.6-1.5 3.5-1.5 5.1v14.9 14.9c0 1.7 0.6 3.5 1.5 5.1 0.9 1.6 2.2 3.1 3.7 3.9l12.9 7.4 12.9 7.4c1.4 0.8 3.3 1.2 5.2 1.2 1.9 0 3.8-0.4 5.2-1.2l12.9-7.4 12.9-7.4c1.4-0.8 2.7-2.2 3.7-3.9 0.9-1.6 1.5-3.5 1.5-5.1v-14.9 -12.7c0-4.6-3.8-6-6.8-4.2l-28 16.2"
          style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-width:10;stroke:#fff" />
      </g>
    </svg>
    <br />
    <div class="info-panel-label">
      <b>GrapesJS Webpage Builder</b> is a simple showcase of what is possible to achieve with the
      <a class="info-panel-link gjs-four-color" target="_blank" href="https://github.com/artf/grapesjs">GrapesJS</a>
      core library
      <br /><br />
      For any hint about the demo check the
      <a class="info-panel-link gjs-four-color" target="_blank"
        href="https://github.com/artf/grapesjs-preset-webpage">Webpage Preset repository</a>
      and open an issue. For problems with the builder itself, open an issue on the main
      <a class="info-panel-link gjs-four-color" target="_blank" href="https://github.com/artf/grapesjs">GrapesJS
        repository</a>
      <br /><br />
      Being a free and open source project contributors and supporters are extremely welcome.
      If you like the project support it with a donation of your choice or become a backer/sponsor via
      <a class="info-panel-link gjs-four-color" target="_blank" href="https://opencollective.com/grapesjs">Open
        Collective</a>
    </div>
  </div>

  <script type="text/javascript">
    var lp = './img/';
    var plp = 'https://via.placeholder.com/350x250/';
    var images = [
      lp + 'team1.jpg',
      lp + 'team2.jpg',
      lp + 'team3.jpg',
      plp + '78c5d6/fff',
      plp + '459ba8/fff',
      plp + '79c267/fff',
      plp + 'c5d647/fff',
      plp + 'f28c33/fff',
      plp + 'e868a2/fff',
      plp + 'cc4360/fff',
      lp + 'work-desk.jpg',
      lp + 'phone-app.png',
      lp + 'bg-gr-v.png'
    ];

    var editor = grapesjs.init({

      height: '100%',
      container: '#gjs',
      fromElement: true,
      showOffsets: true,
      assetManager: {
        embedAsBase64: true,
        assets: images
      },
      selectorManager: { componentFirst: true },
      styleManager: {
        sectors: [{
          name: 'General',
          properties: [
            {
              extend: 'float',
              type: 'radio',
              default: 'none',
              options: [
                { value: 'none', className: 'fa fa-times' },
                { value: 'left', className: 'fa fa-align-left' },
                { value: 'right', className: 'fa fa-align-right' }
              ],
            },
            'display',
            { extend: 'position', type: 'select' },
            'top',
            'right',
            'left',
            'bottom',
          ],
        }, {
          name: 'Dimension',
          open: false,
          properties: [
            'width',
            {
              id: 'flex-width',
              type: 'integer',
              name: 'Width',
              units: ['px', '%'],
              property: 'flex-basis',
              toRequire: 1,
            },
            'height',
            'max-width',
            'min-height',
            'margin',
            'padding'
          ],
        }, {
          name: 'Typography',
          open: false,
          properties: [
            'font-family',
            'font-size',
            'font-weight',
            'letter-spacing',
            'color',
            'line-height',
            {
              extend: 'text-align',
              options: [
                { id: 'left', label: 'Left', className: 'fa fa-align-left' },
                { id: 'center', label: 'Center', className: 'fa fa-align-center' },
                { id: 'right', label: 'Right', className: 'fa fa-align-right' },
                { id: 'justify', label: 'Justify', className: 'fa fa-align-justify' }
              ],
            },
            {
              property: 'text-decoration',
              type: 'radio',
              default: 'none',
              options: [
                { id: 'none', label: 'None', className: 'fa fa-times' },
                { id: 'underline', label: 'underline', className: 'fa fa-underline' },
                { id: 'line-through', label: 'Line-through', className: 'fa fa-strikethrough' }
              ],
            },
            'text-shadow'
          ],
        }, {
          name: 'Decorations',
          open: false,
          properties: [
            'opacity',
            'border-radius',
            'border',
            'box-shadow',
            'background', // { id: 'background-bg', property: 'background', type: 'bg' }
          ],
        }, {
          name: 'Extra',
          open: false,
          buildProps: [
            'transition',
            'perspective',
            'transform'
          ],
        }, {
          name: 'Flex',
          open: false,
          properties: [{
            name: 'Flex Container',
            property: 'display',
            type: 'select',
            defaults: 'block',
            list: [
              { value: 'block', name: 'Disable' },
              { value: 'flex', name: 'Enable' }
            ],
          }, {
            name: 'Flex Parent',
            property: 'label-parent-flex',
            type: 'integer',
          }, {
            name: 'Direction',
            property: 'flex-direction',
            type: 'radio',
            defaults: 'row',
            list: [{
              value: 'row',
              name: 'Row',
              className: 'icons-flex icon-dir-row',
              title: 'Row',
            }, {
              value: 'row-reverse',
              name: 'Row reverse',
              className: 'icons-flex icon-dir-row-rev',
              title: 'Row reverse',
            }, {
              value: 'column',
              name: 'Column',
              title: 'Column',
              className: 'icons-flex icon-dir-col',
            }, {
              value: 'column-reverse',
              name: 'Column reverse',
              title: 'Column reverse',
              className: 'icons-flex icon-dir-col-rev',
            }],
          }, {
            name: 'Justify',
            property: 'justify-content',
            type: 'radio',
            defaults: 'flex-start',
            list: [{
              value: 'flex-start',
              className: 'icons-flex icon-just-start',
              title: 'Start',
            }, {
              value: 'flex-end',
              title: 'End',
              className: 'icons-flex icon-just-end',
            }, {
              value: 'space-between',
              title: 'Space between',
              className: 'icons-flex icon-just-sp-bet',
            }, {
              value: 'space-around',
              title: 'Space around',
              className: 'icons-flex icon-just-sp-ar',
            }, {
              value: 'center',
              title: 'Center',
              className: 'icons-flex icon-just-sp-cent',
            }],
          }, {
            name: 'Align',
            property: 'align-items',
            type: 'radio',
            defaults: 'center',
            list: [{
              value: 'flex-start',
              title: 'Start',
              className: 'icons-flex icon-al-start',
            }, {
              value: 'flex-end',
              title: 'End',
              className: 'icons-flex icon-al-end',
            }, {
              value: 'stretch',
              title: 'Stretch',
              className: 'icons-flex icon-al-str',
            }, {
              value: 'center',
              title: 'Center',
              className: 'icons-flex icon-al-center',
            }],
          }, {
            name: 'Flex Children',
            property: 'label-parent-flex',
            type: 'integer',
          }, {
            name: 'Order',
            property: 'order',
            type: 'integer',
            defaults: 0,
            min: 0
          }, {
            name: 'Flex',
            property: 'flex',
            type: 'composite',
            properties: [{
              name: 'Grow',
              property: 'flex-grow',
              type: 'integer',
              defaults: 0,
              min: 0
            }, {
              name: 'Shrink',
              property: 'flex-shrink',
              type: 'integer',
              defaults: 0,
              min: 0
            }, {
              name: 'Basis',
              property: 'flex-basis',
              type: 'integer',
              units: ['px', '%', ''],
              unit: '',
              defaults: 'auto',
            }],
          }, {
            name: 'Align',
            property: 'align-self',
            type: 'radio',
            defaults: 'auto',
            list: [{
              value: 'auto',
              name: 'Auto',
            }, {
              value: 'flex-start',
              title: 'Start',
              className: 'icons-flex icon-al-start',
            }, {
              value: 'flex-end',
              title: 'End',
              className: 'icons-flex icon-al-end',
            }, {
              value: 'stretch',
              title: 'Stretch',
              className: 'icons-flex icon-al-str',
            }, {
              value: 'center',
              title: 'Center',
              className: 'icons-flex icon-al-center',
            }],
          }]
        }
        ],
      },
      plugins: [
        'gjs-blocks-basic',
        'grapesjs-plugin-forms',
        'grapesjs-component-countdown',
        'grapesjs-plugin-export',
        'grapesjs-tabs',
        'grapesjs-custom-code',
        'grapesjs-touch',
        'grapesjs-parser-postcss',
        'grapesjs-tooltip',
        'grapesjs-tui-image-editor',
        'grapesjs-typed',
        'grapesjs-style-bg',
        'grapesjs-preset-webpage',
      ],
      pluginsOpts: {
        'gjs-blocks-basic': { flexGrid: true },
        'grapesjs-tui-image-editor': {
          script: [
            // 'https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.6.7/fabric.min.js',
            'https://uicdn.toast.com/tui.code-snippet/v1.5.2/tui-code-snippet.min.js',
            'https://uicdn.toast.com/tui-color-picker/v2.2.7/tui-color-picker.min.js',
            'https://uicdn.toast.com/tui-image-editor/v3.15.2/tui-image-editor.min.js'
          ],
          style: [
            'https://uicdn.toast.com/tui-color-picker/v2.2.7/tui-color-picker.min.css',
            'https://uicdn.toast.com/tui-image-editor/v3.15.2/tui-image-editor.min.css',
          ],
        },
        'grapesjs-tabs': {
          tabsBlock: { category: 'Extra' }
        },
        'grapesjs-typed': {
          block: {
            category: 'Extra',
            content: {
              type: 'typed',
              'type-speed': 40,
              strings: [
                'Text row one',
                'Text row two',
                'Text row three',
              ],
            }
          }
        },
        'grapesjs-preset-webpage': {
          modalImportTitle: 'Import Template',
          modalImportLabel: '<div style="margin-bottom: 10px; font-size: 13px;">Paste here your HTML/CSS and click Import</div>',
          modalImportContent: function (editor) {
            return editor.getHtml() + '<style>' + editor.getCss() + '</style>'
          },
        },
        'grapesjs-plugin-export': {
                root(ed) { 
                    const all = ed.Pages.getAll();
                    const pages = {};
                    const css = {};
                    all.map(page => {
                        pages[(page.get('name') || page.id) + '.html'] = '<!doctype html>' +
                            '<html lang="en">' +
                            '<head>' +
                            '<meta charset="utf-8">' +
                            '<link rel="stylesheet" href="/css/style-' + page.id + '.css">' +
                            '</head>' +
                            '<body>' +
                            page.getMainComponent().toHTML() +
                            '</body>' +
                            '</html>';
                        css['style-' + page.id + '.css'] = editor.CodeManager.getCode(page.getMainComponent(), 'css')
                    });
                    return {
                        css: {
                            ...css
                        },
                        ...pages
                    }
                }
            }

      },
      storageManager: {
        type: 'remote',
        stepsBeforeSave: 1,
        options: {
          remote: {
            urlLoad: '/webload',
            urlStore: '/websave',
            fetchOptions: opts => (opts.method === 'POST' ? { method: 'PATCH' } : {}),
            onStore: data => ({ id: 'frontend', data }),
            onLoad: result => result.data,
          }
        }
      },
      canvas: {
        scripts: ["https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js",
          "https://malsup.github.io/jquery.form.js","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" 
         ],
        // The same would be for external styles
        //styles: [''],
      },
      allowScripts: 1,
      keepUnusedStyles: true
    });



    editor.I18n.addMessages({
      en: {
        styleManager: {
          properties: {
            'background-repeat': 'Repeat',
            'background-position': 'Position',
            'background-attachment': 'Attachment',
            'background-size': 'Size',
          }
        },
      },
      
    });

    var pn = editor.Panels;
    var modal = editor.Modal;
    var cmdm = editor.Commands;
    var pageManager = editor.Pages;
    var pages = pageManager.getAll()
    var mainid = pageManager.getMain()
    console.log(pages)
    console.log(mainid.id)

    var newPanel = pn.addPanel({
      id: 'pages',
      className: 'pages',
      visible: true,
      buttons: [{
        id: 'Newpage',
        el: '<div>Add New Page</div>',
        className: 'pagebtn',

        command: 'addpage'

      }, {
        id: 'main',
        el: '<div>',
        className: 'pagebtn',

        el: '<div>Main Page</div>',
        command: 'mainpg'
      }]
    });

    cmdm.add('addpage', function () {
      var arrayOfPages = pageManager.getAll();
      var btnid = arrayOfPages.length
      u = 'page' + btnid;
      const newPage = pageManager.add({
        id: 'page' + btnid, // without an explicit ID, a random one will be created
        styles: `.my-class { color: red }`, // or a JSON of styles
        component: '<div class="my-class">New Page ' + btnid + '</div>', // or a JSON of components
      });


      var newButton = pn.addButton('pages', {
        id: 'page' + btnid,
        el: '<div>New Page ' + btnid + '</div>',
        className: 'pagebtn',
        command: function () { pageManager.select('page' + btnid) }
      });
    })




    // Update canvas-clear command
    cmdm.add('canvas-clear', function () {
      if (confirm('Are you sure to clean the canvas?')) {
        editor.runCommand('core:canvas-clear')
        setTimeout(function () { localStorage.clear() }, 0)
      }
    });

    // Add info command
    var mdlClass = 'gjs-mdl-dialog-sm';
    var infoContainer = document.getElementById('info-panel');

    cmdm.add('open-info', function () {
      var mdlDialog = document.querySelector('.gjs-mdl-dialog');
      mdlDialog.className += ' ' + mdlClass;
      infoContainer.style.display = 'block';
      modal.setTitle('About this demo');
      modal.setContent(infoContainer);
      modal.open();
      modal.getModel().once('change:open', function () {
        mdlDialog.className = mdlDialog.className.replace(mdlClass, '');
      })
    });

    cmdm.add('open-info', function () {
      var mdlDialog = document.querySelector('.gjs-mdl-dialog');
      mdlDialog.className += ' ' + mdlClass;
      infoContainer.style.display = 'block';
      modal.setTitle('About this demo');
      modal.setContent(infoContainer);
      modal.open();
      modal.getModel().once('change:open', function () {
        mdlDialog.className = mdlDialog.className.replace(mdlClass, '');
      })
    });



    pn.addButton('options', {
      id: 'open-info',
      className: 'fa fa-question-circle',
      command: function () { editor.runCommand('open-info') },
      attributes: {
        'title': 'About',
        'data-tooltip-pos': 'bottom',
      },

    });




    // Simple warn notifier
    var origWarn = console.warn;
    toastr.options = {
      closeButton: true,
      preventDuplicates: true,
      showDuration: 250,
      hideDuration: 150
    };
    console.warn = function (msg) {
      if (msg.indexOf('[undefined]') == -1) {
        toastr.warning(msg);
      }
      origWarn(msg);
    };


    // Add and beautify tooltips
    [['sw-visibility', 'Show Borders'], ['preview', 'Preview'], ['fullscreen', 'Fullscreen'],
    ['export-template', 'Export'], ['undo', 'Undo'], ['redo', 'Redo'],
    ['gjs-open-import-webpage', 'Import'], ['canvas-clear', 'Clear canvas']]
      .forEach(function (item) {
        pn.getButton('options', item[0]).set('attributes', { title: item[1], 'data-tooltip-pos': 'bottom' });
      });
    [['open-sm', 'Style Manager'], ['open-layers', 'Layers'], ['open-blocks', 'Blocks']]
      .forEach(function (item) {
        pn.getButton('views', item[0]).set('attributes', { title: item[1], 'data-tooltip-pos': 'bottom' });
      });
    var titles = document.querySelectorAll('*[title]');

    for (var i = 0; i < titles.length; i++) {
      var el = titles[i];
      var title = el.getAttribute('title');
      title = title ? title.trim() : '';
      if (!title)
        break;
      el.setAttribute('data-tooltip', title);
      el.setAttribute('title', '');
    }


    // Store and load events
    editor.on('storage:load', function (e) { console.log('Loaded ', e) });
    editor.on('storage:store', function (e) { console.log('Stored ', e) });


    // Do stuff on load
    editor.on('load', function () {
      var $ = grapesjs.$;
      // Show borders by default
      var mainid = pageManager.getMain()
      mainid.set({ id: 'index', name:'index'})
      console.log(mainid.id)
      pn.getButton('options', 'sw-visibility').set('active', 1);

      // Show logo with the version
      var logoCont = document.querySelector('.gjs-logo-cont');
      document.querySelector('.gjs-logo-version').innerHTML = 'v' + grapesjs.version;
      var logoPanel = document.querySelector('.gjs-pn-commands');
      logoPanel.appendChild(logoCont);

      cmdm.add('mainpg', function () {
        pageManager.select(mainid.id);
      });
      
      // Load and show settings and style manager
      var openTmBtn = pn.getButton('views', 'open-tm');
      openTmBtn && openTmBtn.set('active', 1);
      var openSm = pn.getButton('views', 'open-sm');
      openSm && openSm.set('active', 1);

      // Remove trait view
      pn.removeButton('views', 'open-tm');

      // Add Settings Sector
      var traitsSector = $('<div class="gjs-sm-sector no-select">' +
        '<div class="gjs-sm-sector-title"><span class="icon-settings fa fa-cog"></span> <span class="gjs-sm-sector-label">Settings</span></div>' +
        '<div class="gjs-sm-properties" style="display: none;"></div></div>');
      var traitsProps = traitsSector.find('.gjs-sm-properties');
      traitsProps.append($('.gjs-trt-traits'));
      $('.gjs-sm-sectors').before(traitsSector);
      traitsSector.find('.gjs-sm-sector-title').on('click', function () {
        var traitStyle = traitsProps.get(0).style;
        var hidden = traitStyle.display == 'none';
        if (hidden) {
          traitStyle.display = 'block';
        } else {
          traitStyle.display = 'none';
        }
      });

      // Open block manager
      var openBlocksBtn = editor.Panels.getButton('views', 'open-blocks');
      openBlocksBtn && openBlocksBtn.set('active', 1);

      // Move Ad
      $('#gjs').append($('.ad-cont'));


      function newbtn(i) {
        var newButton = pn.addButton('pages', {
          id: 'page' + (i),
          el: '<div>New Page ' + i + '</div>',
          className: 'pagebtn',

          command: function (editor) {
            pageManager.select('page' + (i))
            console.log(mainid.id)
          }

        });
      }
      for (var i = 1; i < pageManager.getAll().length; i++) {
        newbtn(i) 

      }
    });

    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-74284223-1', 'auto');
    ga('send', 'pageview');


  </script>
</body>

</html>